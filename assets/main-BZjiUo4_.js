(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();let y=null,a=0,d=0,f=!1,m=[],l=new Set,g=localStorage.getItem("darkMode")==="true";const c=new(window.AudioContext||window.webkitAudioContext);document.getElementById("timerSetup");const V=document.getElementById("timerDisplay"),$=document.getElementById("nudgeOptions"),v=document.getElementById("minutes"),k=document.getElementById("startBtn"),L=document.getElementById("pauseBtn"),J=document.getElementById("resetBtn"),p=document.getElementById("timeText"),R=document.getElementById("progressFill"),O=document.getElementById("nudgeMarkers"),I=document.getElementById("statusText"),x=document.getElementById("nextNudge"),b=document.getElementById("progressBar"),h=document.getElementById("circularProgressContainer"),H=document.getElementById("progressCircle"),D=document.getElementById("circularNudgeMarkers"),w=document.getElementById("nudgeCount"),z=document.getElementById("nudgeCountValue"),P=document.getElementById("nudgePercent"),F=document.getElementById("nudgePercentValue"),B=document.getElementById("progressToggleBtn"),q=document.getElementById("toggleIcon"),Q=document.getElementById("themeToggle"),T=document.getElementById("themeIcon");let E=!1;function W(){g?(document.documentElement.classList.add("dark"),T.textContent="‚òÄÔ∏è"):(document.documentElement.classList.remove("dark"),T.textContent="üåô")}function X(){g=!g,localStorage.setItem("darkMode",g.toString()),g?(document.documentElement.classList.add("dark"),T.textContent="‚òÄÔ∏è"):(document.documentElement.classList.remove("dark"),T.textContent="üåô")}function N(){const n=c.createOscillator(),e=c.createGain();n.connect(e),e.connect(c.destination),n.frequency.value=800,n.type="sine",e.gain.setValueAtTime(.3,c.currentTime),e.gain.exponentialRampToValueAtTime(.01,c.currentTime+.5),n.start(c.currentTime),n.stop(c.currentTime+.5),setTimeout(()=>{const s=c.createOscillator(),o=c.createGain();s.connect(o),o.connect(c.destination),s.frequency.value=1e3,s.type="sine",o.gain.setValueAtTime(.3,c.currentTime),o.gain.exponentialRampToValueAtTime(.01,c.currentTime+.5),s.start(c.currentTime),s.stop(c.currentTime+.5)},100)}function Y(n){const e=[],s=n*60;if(w.checked){const o=parseInt(z.value);for(let t=1;t<=o;t++){const i=Math.floor(s*t/(o+1));e.push(i)}}else if(P.checked){const o=parseInt(F.value),t=Math.floor(s*o/100);e.push(t)}return e.sort((o,t)=>o-t)}function M(){O.innerHTML="",m.forEach(n=>{const e=document.createElement("div");e.className="nudge-marker",e.dataset.time=n;const s=n/a*100;e.style.left=`${s}%`,O.appendChild(e)})}function S(){D.innerHTML="",m.forEach(n=>{const e=document.createElementNS("http://www.w3.org/2000/svg","circle");e.setAttribute("class","circular-nudge-marker"),e.dataset.time=n;const o=n/a*2*Math.PI,t=100+80*Math.cos(o),i=100+80*Math.sin(o);e.setAttribute("cx",t),e.setAttribute("cy",i),e.setAttribute("r","6"),D.appendChild(e)})}function Z(){const n=a-d,e=m.filter(s=>s>n&&!l.has(s));if(e.length>0){const o=e[0]-n,t=Math.floor(o/60),i=o%60;x.textContent=`Next nudge in ${t}:${i.toString().padStart(2,"0")}`}else l.size>0&&l.size===m.length?x.textContent="All nudges completed":x.textContent=""}function G(n){const e=Math.floor(n/60),s=n%60;return`${e}:${s.toString().padStart(2,"0")}`}function A(){p.textContent=G(d);const n=(a-d)/a*100,e=a-d;R.style.width=`${n}%`,document.querySelectorAll(".nudge-marker").forEach(t=>{const i=parseInt(t.dataset.time);e>=i&&t.classList.add("completed")});const s=2*Math.PI*80,o=s-n/100*s;H.style.strokeDashoffset=o,document.querySelectorAll(".circular-nudge-marker").forEach(t=>{const i=parseInt(t.dataset.time);e>=i&&t.classList.add("completed")}),Z()}function _(){const n=a-d;m.forEach(e=>{n>=e&&!l.has(e)&&(l.add(e),N(),p.classList.add("nudge-alert"),setTimeout(()=>{p.classList.remove("nudge-alert")},1500),"Notification"in window&&Notification.permission==="granted"&&new Notification("Nudge O'Clock",{body:`Time check! ${G(d)} remaining`}))})}function ee(){f||(d--,A(),_(),d<=0&&(j(),I.textContent="Timer Complete!",N(),setTimeout(()=>N(),300),"Notification"in window&&Notification.permission==="granted"&&new Notification("Nudge O'Clock",{body:"Timer complete!"})))}function K(){E?(b.classList.add("hidden"),h.classList.remove("hidden"),h.classList.add("flex")):(b.classList.remove("hidden"),h.classList.add("hidden"),h.classList.remove("flex"))}function te(){E=!E,E?(q.textContent="‚óè",B.innerHTML='<span id="toggleIcon">‚óè</span> Circle'):(q.textContent="‚ñ¨",B.innerHTML='<span id="toggleIcon">‚ñ¨</span> Bar'),K(),M(),S(),A()}function u(){const e=(parseInt(v.value)||30)*60;M(),S();const s=50,o=e*s/100;R.style.width=`${s}%`;const t=2*Math.PI*80,i=t-s/100*t;H.style.strokeDashoffset=i,document.querySelectorAll(".nudge-marker").forEach(r=>{const C=parseInt(r.dataset.time);o>=C?r.classList.add("completed"):r.classList.remove("completed")}),document.querySelectorAll(".circular-nudge-marker").forEach(r=>{const C=parseInt(r.dataset.time);o>=C?r.classList.add("completed"):r.classList.remove("completed")})}function U(){const n=parseInt(v.value);if(!n||n<1){alert("Please enter a valid duration");return}"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),a=n*60,d=a,m=Y(n),l.clear(),$.classList.add("hidden"),k.classList.add("hidden"),V.classList.remove("hidden"),p.classList.remove("hidden"),K(),M(),S(),A(),I.textContent="Running...",L.textContent="Pause",f=!1,y=setInterval(ee,1e3)}function j(){y&&(clearInterval(y),y=null)}function ne(){f=!f,f?(L.textContent="Resume",I.textContent="Paused"):(L.textContent="Pause",I.textContent="Running...")}function se(){j(),V.classList.add("hidden"),p.classList.add("hidden"),$.classList.remove("hidden"),k.classList.remove("hidden"),l.clear(),u()}k.addEventListener("click",U);L.addEventListener("click",ne);J.addEventListener("click",se);B.addEventListener("click",te);Q.addEventListener("click",X);v.addEventListener("input",u);w.addEventListener("change",u);z.addEventListener("input",()=>{w.checked&&u()});P.addEventListener("change",u);F.addEventListener("input",()=>{P.checked&&u()});v.addEventListener("keypress",n=>{n.key==="Enter"&&U()});document.addEventListener("DOMContentLoaded",()=>{W(),u()});
